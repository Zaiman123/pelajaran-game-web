<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>GamePortal - Koleksi Game Online Terbaik</title>
        <link rel="stylesheet" href="style.css">
 
</head>
<body>
    <!-- Header/Navbar -->
    <header>
        <nav class="navbar">
            <div class="logo">
                <h1>GamePortal</h1>
            </div>
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Cari game...">
                <button class="search-button">üîç</button>
            </div>
        </nav>
    </header>
    
    <!-- Main Content -->
    <div class="container">
        <!-- Categories -->
        <div class="categories">
            <button class="category-btn active">Semua</button>
            <button class="category-btn">Aksi</button>
            <button class="category-btn">Petualangan</button>
            <button class="category-btn">Puzzle</button>
            <button class="category-btn">Balapan</button>
            <button class="category-btn">Olahraga</button>
            <button class="category-btn">Strategi</button>
            <button class="category-btn">Tembak-tembakan</button>
        </div>
        
        <!-- Game Grid -->
        <div class="game-grid">
            <!-- Game 1 -->
            <div class="game-card">
                <div class="game-image"></div>
                <div class="game-info">
                    <h3 class="game-title">Space Adventure</h3>
                    <p class="game-description">Petualangan luar angkasa yang menegangkan</p>
                    <button class="play-btn" onclick="openGame('Space Adventure')">Mainkan</button>
                </div>
            </div>
                <!-- Catch the Fruit Game -->
                <div class="game-card">
                    <div class="game-image"></div>
                    <div class="game-info">
                        <h3 class="game-title">Catch the Fruit</h3>
                        <p class="game-description">Tangkap buah sebanyak mungkin!</p>
                        <button class="play-btn" onclick="playCatchTheFruit()">Mainkan</button>
                    </div>
                </div>
            
            <!-- Game 2 -->
            <div class="game-card">
                <div class="game-image"></div>
                <div class="game-info">
                    <h3 class="game-title">Speed Racer</h3>
                    <p class="game-description">Balapan mobil dengan kecepatan tinggi</p>
                    <button class="play-btn" onclick="openGame('Speed Racer')">Mainkan</button>
                </div>
            </div>
            
            <!-- Game 3 -->
            <div class="game-card">
                <div class="game-image"></div>
                <div class="game-info">
                    <h3 class="game-title">Puzzle Master</h3>
                    <p class="game-description">Tantang otak Anda dengan puzzle menantang</p>
                    <button class="play-btn" onclick="openGame('Puzzle Master')">Mainkan</button>
                </div>
            </div>
            
            <!-- Game 4 -->
            <div class="game-card">
                <div class="game-image"></div>
                <div class="game-info">
                    <h3 class="game-title">Soccer Stars</h3>
                    <p class="game-description">Game sepak bola dengan grafis yang memukau</p>
                    <button class="play-btn" onclick="openGame('Soccer Stars')">Mainkan</button>
                </div>
            </div>
            
            <!-- Game 5 -->
            <div class="game-card">
                <div class="game-image"></div>
                <div class="game-info">
                    <h3 class="game-title">Archery Challenge</h3>
                    <p class="game-description">Uji ketepatan panahan Anda</p>
                    <button class="play-btn" onclick="openGame('Archery Challenge')">Mainkan</button>
                </div>
            </div>
            
            <!-- Game 6 -->
            <div class="game-card">
                <div class="game-image"></div>
                <div class="game-info">
                    <h3 class="game-title">Castle Defense</h3>
                    <p class="game-description">Lindungi kastil Anda dari serangan musuh</p>
                    <button class="play-btn" onclick="openGame('Castle Defense')">Mainkan</button>
                </div>
            </div>
            
            <!-- Game 7 -->
            <div class="game-card">
                <div class="game-image"></div>
                <div class="game-info">
                    <h3 class="game-title">Pizza Chef</h3>
                    <p class="game-description">Jadi koki pizza terbaik di kota</p>
                    <button class="play-btn" onclick="openGame('Pizza Chef')">Mainkan</button>
                </div>
            </div>
            
            <!-- Game 8 -->
            <div class="game-card">
                <div class="game-image"></div>
                <div class="game-info">
                    <h3 class="game-title">Dino Run</h3>
                    <p class="game-description">Lari dan hindari rintangan sebagai dinosaurus</p>
                    <button class="play-btn" onclick="openGame('Dino Run')">Mainkan</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->

    <!-- Game Modal -->
    <div class="game-modal" id="gameModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeGame()">√ó</button>
            <iframe class="game-frame" id="gameFrame" src=""></iframe>
        </div>
    </div>
    
    <script>
        // Fungsi untuk membuka game di modal
        function openGame(gameName) {
            document.getElementById('gameModal').style.display = 'flex';
            document.getElementById('gameFrame').src = 'about:blank';
        }

        // Fungsi untuk menutup modal game
        function closeGame() {
            document.getElementById('gameModal').style.display = 'none';
            document.getElementById('gameFrame').src = '';
        }

        // Fungsi untuk menjalankan Catch the Fruit
        function playCatchTheFruit() {
            window.open('catch-the-fruit.html', '_blank');
        }

        // Fungsi untuk mengambil dan menampilkan game dari search.php
        function fetchGames(category = '', name = '') {
            const params = new URLSearchParams();
            if (category && category !== 'semua') params.append('category', category);
            if (name) params.append('name', name);
            fetch('search.php?' + params.toString())
                .then(response => response.json())
                .then(data => updateGameGrid(data))
                .catch(() => updateGameGrid([]));
        }

        // Fungsi untuk update tampilan game-grid
        function updateGameGrid(games) {
            const grid = document.querySelector('.game-grid');
            if (!games.length) {
                grid.innerHTML = '<p style="grid-column: 1/-1; text-align:center">Tidak ada game ditemukan.</p>';
                return;
            }
            grid.innerHTML = games.map(game => {
                let playBtn = '';
                if (game.name === 'Catch the Fruit') {
                    playBtn = `<button class="play-btn" onclick="playCatchTheFruit()">Mainkan</button>`;
                } else {
                    playBtn = `<button class="play-btn" onclick="openGame('${game.name.replace(/'/g, "\\'")}")">Mainkan</button>`;
                }
                return `
                <div class="game-card">
                    <div class="game-image"></div>
                    <div class="game-info">
                        <h3 class="game-title">${game.name}</h3>
                        <p class="game-description">Kategori: ${game.category}</p>
                        ${playBtn}
                    </div>
                </div>
                `;
            }).join('');
        }

        // Event handler kategori
        document.querySelectorAll('.category-btn').forEach(button => {
            button.addEventListener('click', function() {
                document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                const category = this.textContent.trim().toLowerCase();
                const name = document.querySelector('.search-input').value.trim();
                fetchGames(category, name);
            });
        });

        // Event handler pencarian
        document.querySelector('.search-button').addEventListener('click', function() {
            const searchTerm = document.querySelector('.search-input').value.trim();
            const activeCategory = document.querySelector('.category-btn.active').textContent.trim().toLowerCase();
            fetchGames(activeCategory, searchTerm);
        });

        // Pencarian dengan tombol Enter
        document.querySelector('.search-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.querySelector('.search-button').click();
            }
        });

        // Inisialisasi: tampilkan semua game saat pertama kali
        window.addEventListener('DOMContentLoaded', function() {
            fetchGames();
        });
    </script>
</body>
</html>
